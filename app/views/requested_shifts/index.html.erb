

<h1>All requested shifts for <%= @week_template.name %></h1>

Filter requests: 

<table>
  <tr>
		<th>User</th>
    <th colspan=2>Preferred</th>
    <th colspan=2>Acceptable</th>
    <th>Day</th>
		<th>Locations</th>
  </tr>
  <tr>
		<th></th>
    <th>Start</th>
    <th>End</th>
    <th>Start</th>
    <th>End</th>
    <th></th>
		<th></th>
  </tr>

<% @requested_shifts.sort{|x,y| x.day <=> y.day}.each do |requested_shift| %>
  <tr>
		<td><%=h requested_shift.user.name %></td>
    <td><%=h requested_shift.preferred_start.strftime("%I:%M %p") %></td>
    <td><%=h requested_shift.preferred_end.strftime("%I:%M %p") %></td>
    <td><%=h requested_shift.acceptable_start.strftime("%I:%M %p") %></td>
    <td><%=h requested_shift.acceptable_end.strftime("%I:%M %p") %></td>
    <td><%=h RequestedShift::WEEK_DAY_SELECT[requested_shift.day][0]%></td>
		<td><%=h requested_shift.locations.collect{|l| l.short_name}.to_sentence %></td>
    <td><%= link_to 'Edit', edit_template_requested_shift_path(@week_template, requested_shift) %></td>
    <td><%= link_to 'X', template_requested_shift_path(@week_template, requested_shift), :confirm => 'Are you sure?', :method => :delete %></td>
  </tr>
<% end %>
</table>

<br />

<%#= link_to 'New Requested Shift', new_template_requested_shift_path(@week_template) %>

<br />
<br />

<%= link_to 'Back to Template', templates_path() %> |
<%= link_to 'Go to All Shift Preferences', template_shift_preferences_path() %>

<%#= render :partial => 'week' %>
