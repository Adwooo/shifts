<% title "Welcome, #{current_user.name}" %>

<% if user_has_active_shift? %>
  <fieldset class="index">
    <legend>Your Current Shift</legend>
    <%= link_to "Return to your current shift report", report_path(current_user.current_shift.report) %>
  </fieldset>
<% end %>

<% unless current_user.notices.empty? %>
  <%= render :partial => 'notices/for_you' %>
<% end %>

<% unless @upcoming_shifts.empty? %>
  <fieldset class="index">
    <legend>Your Upcoming shifts</legend>
    <ul>
      <%= render :partial => 'shifts/upcoming_shift', :collection => @upcoming_shifts %>
    </ul>
  </fieldset>
<% end %>

<% unless @subs_you_requested.empty? %>
  <fieldset class="index">
    <legend>Subs You Requested</legend>
    <ul>
      <%= (render :partial => 'shifts/upcoming_sub', :collection => @subs_you_requested) %>
    </ul>
  </fieldset>
<% end %>

<% unless @watched_objects.empty? %>
  <fieldset class="index">
    <legend>Recent updates for your watched data objects</legend>
      <%= render :partial => 'data_objects/watched_object', :collection => @watched_objects %>
  </fieldset>
<% end %>

<% unless @subs_you_can_take.empty? %>
  <fieldset class="index">
    <legend>Subs You Reqeusted</legend>
    <ul>
          <%= (render :partial => 'shifts/upcoming_sub', :collection => @subs_you_can_take) %>
    </ul>
  </fieldset>
<% end %>



<fieldset class="index">
  <legend>Punch Clock</legend>
  <% if current_user.punch_clock %>
      <%= image_tag("icons/clock_stop.png", :class => "mini_icon") %>
      <%= link_to "Clock out", edit_punch_clock_path(current_user.punch_clock) %>
  <% else %>
  <%= image_tag("icons/clock_play.png", :class => "mini_icon") %>
    <%= link_to "Clock in", user_punch_clocks_path(current_user), :method => :post %>
  <% end %>
</fieldset>

<% if @most_recent_payform %>
  <fieldset class="index">
    <legend>Summary of your most recent payform</legend>
    <%= render :partial => "mini_payform", :object => @most_recent_payform %>
  </fieldset>
<% end %>

<% unless current_user.user_config.view_loc_groups.empty? %>
<fieldset class="index">
  <legend>Today's schedule</legend>
  <%= render :partial => 'shifts/schedule/day', :object => Date.today %>
</fieldset>
<% end %>

