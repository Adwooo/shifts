<% day_preprocessing(day) %>

<h2><a name="<%= day.to_s %>"><%= day.to_s(:just_date_long) %></a></h2>

<div class="timeline" style="height:<%= @table_pixels %>px; width: 100%;">
  <div class="days">
    <div class="day" style="height: <%= @table_pixels / (@table_height)%>px;"></div>
    <%= render :partial => "shifts/schedule/loc_group", :collection => @loc_groups %>
  </div>
  <div class="timeline-data">
    <ul class="intervals" style="height: <%= 100 / (@table_height)%>%;">
      <%= render :partial => "shifts/schedule/hour", :collection =>  @dept_start_hour...@dept_end_hour %>
    </ul>
    <%= render :partial => "shifts/schedule/loc_group_row", :collection => @loc_groups, :locals => {:day => day}  %>
  </div>
</div>

<% unless @hidden_shifts.empty? %>
  <h3> Shifts outside of schedule:</h3>
  <ul class="hidden_shifts">
    <%= render :partial => "shifts/schedule/hidden_shift", :collection => @hidden_shifts %>
  </ul>
<% end %>
<br/><br/>
