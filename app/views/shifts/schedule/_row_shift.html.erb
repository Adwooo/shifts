<% if row_shift.start == @row_time # if shift starts where we are -%>
    <%= print_cell("shift_time", @row_time, row_shift.end, row_shift) -%><%# prints current shift -%>
    <% @row_time = row_shift.end %>

<%# if this shift will not fit in the current row, push it to the next row%>
<% elsif row_shift.start < @row_time %>
    <% @shifts_in_row[index+1] ||= []
       @shifts_in_row[index+1] << row_shift %>
    <%#= "ERROR from _row_shift partial from row #{row_shift}" %>
    <%#= row_shift.start + " to " row_shift.end %><!-- <br /> -->

<% else #which means:  @row_time < row_shift.start  # if shift is later -%>
    <%= print_cell("free_time", @row_time, row_shift.start, nil) -%><%# print some free time -%>
    <%= print_cell("shift_time", row_shift.start, row_shift.end, row_shift) -%><%# this is the next shift, print it.%>
    <% @row_time = row_shift.end # move to end of shift%>
<% end -%>
<%# please do not remove this line after END, for some reason it doesn't work properly without it %>