<%#= render :partial => 'data_types/progress_bar', :locals => {:current_step => 2} %>

<%= form_for (params[:id] ? [DataType.find(params[:data_type_id]), @data_field] : [:data_type, @data_field]) do |df_form| %>
  <%= df_form.error_messages %>
<!--    <p>
     <%= df_form.label :name %><br />
     <%= df_form.text_field :name %>
   </p>
   <p>
     <%= df_form.label :display_type %><br />
     <%= df_form.select :display_type, options=(DataField::DISPLAY_TYPE_OPTIONS), {}, :class => "display_type" %><br/>
   </p>
     <%#= observe_field('data_field_display_type',
        :url => { :controller => :data_fields,
                  :action => :update_form,
                  :layout => false},
        :method => :get,
        :with => 'display_type',
        :on => "change") %> -->
    <%= render partial: 'description', locals:{df_form: df_form} %>
   <p>
     <div id="optional_fields"></div>
   </p>
   <p>
     <%= df_form.submit "Save and add another field", :name => "add_another" %>
     <%= df_form.submit "Save and finish", :name => "submit" %>
   </p>
<% end %>

<%= render :partial => "data_types/summary", :locals => {:data_type => DataType.find(params[:data_type_id])} %>

