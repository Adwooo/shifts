<% javascript 'sorttable' %>

<% title "Data Objects" %>
<% form_tag '/data_objects/index', :id => "view_options" do %>
  <div id="selection_menu">
    Group by 
    
    <div id="group_type">
      <%= select_tag "view_options[group_type]", options_for_select(@group_type_options, @group_type_options.select{|a|a.include?@selected_type}) %>
    &nbsp;&nbsp;&nbsp;&nbsp;
    
    <%= observe_field('view_options_group_type',
        :url => { :controller => :data_objects,
                  :action => :index, 
                  :layout => false},
        :method => :get,
        :with => "'group_type=' + escape(value)",           
        :on => "change") %>
        </div>

    <div id='group_by' style='display:none'>
      <%# empty div for the ajax call to act on %>
    </div>
    
    <%# @selected_type = "wibble" %>
  <%#= observe_field('view_options_group_by',
      :url => { :controller => :data_objects,
                :action => :index, 
                :layout => false},
      :method => :get,     
      :with => "'group_by='+escape(value) + '&group_type=' + escape(#{@selected_type})",    
      :on => "change") %>
    
    <%= submit_tag "Update" %>
  </div>
  


<%#= render :partial => "data_objects_form_observer" %>
      

<!--  Group by 
  <%= select_tag :group_by, options_for_select(@group_type_options, @selected_type) %>
  &nbsp;&nbsp;&nbsp;&nbsp;
  <%#= select_tag "view_options[group_by]", options_for_select(@group_by_options, @selected_by) %>
  <%= submit_tag "Update" %> -->

<% end -%>
<br>
<% if DataType.first %>
  <%= render :partial => "data_objects" %>
  <br>
  <%= link_to "New Data Object", new_data_object_path %>
<% else %>
  You must set up a <%= link_to "data type", new_data_type_path %> before you can create any data objects.
<% end %>
