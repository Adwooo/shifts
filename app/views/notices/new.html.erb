<% title "New Notice" %>

<% form_for(@notice) do |f| %>
  <%= f.error_messages %>

  <% if @current_user.is_admin_of?(@department) %>
  <p>
    Is sticky?<br />
    <%= f.check_box :is_sticky %>
  </p>
  From:<br/>
    <%= radio_button_tag 'start_time_choice', 'date', :checked => true -%>
      <%= datetime_select 'notice', 'start_time' %><br />
    <%= radio_button_tag 'start_time_choice', 'now' -%> Now<br />
    Until:<br/>
    <%= radio_button_tag 'end_time_choice', 'date', :checked => true -%>
      <%= datetime_select 'notice', 'end_time' %><br />
    <%= radio_button_tag 'end_time_choice', 'indefinite' -%> Indefinitely<br />
  <% end %>

  <p>
    <%= f.label :content %><br />
    <%= f.text_area :content %>
  </p>

  <p>
    <%= f.label :for_users %><br />
    <%= f.text_field :for_users %>
  </p>

    <%= check_box_tag "notice[for_departments]", @department.id, @notice.for_departments == @department.id,  :disabled => false %><%= @department.name %> (department-wide)<br />
    <% for loc_group in @loc_groups do %>
    &nbsp;&nbsp;&nbsp;
    <%= check_box_tag "notice[for_location_groups][]", loc_group.id, false, :disabled => false %><%= loc_group.name %><br />
    <% for location in loc_group.locations do %>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <%= check_box_tag "notice[for_locations][]", location.id, false, :disabled => false %><%= location.name %><br />
    <% end %>
  <% end %>

  <p>
    <%= f.submit 'Create' %>
  </p>
<% end %>

<%= link_to 'Back', notices_path %>

