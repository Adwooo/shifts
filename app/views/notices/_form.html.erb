<% unobtrusive_datepicker_includes %>

<% form_remote_for @notice do |f| %>
  <%= f.error_messages %>
  <br />
  <fieldset class = "index">
    <legend>Content:</legend>
    <%= f.text_area :content, :size => "60x10" %>
  </fieldset>
  <% if current_user.is_admin_of?(current_department) %>
    <br />
    <fieldset class = "index">
      <legend>Type of notice:</legend>
      <%= radio_button_tag 'type', 'sticky' %> Sticky <br />
      <%= radio_button_tag 'type', 'announcement', true %> Announcement
    </fieldset>
    <div id = "time_choices">
      <br />
      <fieldset class = "index">
      <legend>Start time:</legend>
        <%= radio_button_tag 'start_time_choice', 'now', true %> Now <br/>
        <%= radio_button_tag 'start_time_choice', 'date' %>
        <%= f.unobtrusive_datetime_picker :start_time, :minute_step => @department.department_config.time_increment %>
      </fieldset>
      <br />
      <fieldset class = "index">
        <legend>End time:</legend>
        <%= radio_button_tag 'end_time_choice', 'indefinite', true %> Never <br/>
        <%= radio_button_tag 'end_time_choice', 'date' %>
        <%= f.unobtrusive_datetime_picker :end_time, :minute_step => @department.department_config.time_increment %>
      </fieldset>
    </div>
  <% end %>

  <% unless current_user.is_admin_of?(current_department) %>
    <span id ="advanced_link">
      <%= link_toggle "advanced_options_div", "Show/hide advanced options", "fast" %>
    </span>
  <%end%>

  <div id="advanced_options_div">
    <%= render :partial => 'advanced_options'%>
  </div>

  <br />
  <%= f.submit 'Save' %>

<% end %>

<%= javascript_include_tag 'notices' %>

