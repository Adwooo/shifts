<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <title><%= h(yield(:title) || 'Shifts') %></title>
    <%= stylesheet_link_tag    "application", :media => "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>

  	<%= javascript_tag "var AUTH_TOKEN = #{form_authenticity_token.inspect};" if protect_against_forgery? -%>
  	<%= csrf_meta_tag %>
    <link rel="icon" href="/favicon.ico" type="image/ico" />
  </head>

  <body>
    <!-- Start pagebox container -->
    <div id="pagebox" class='container'>
      <div id="page_header">
        <h2 class="page_header">
          <a href="http://www.yale.edu">Shifts by Yale University</a>
        </h2>
      <% if ( mobile_device? ) && (current_user || session[:cas_user]) %>
        <%= render :partial => "layouts/include/mobile_login" %>
      <% elsif current_user || session[:cas_user] %>
        <%= render :partial => "layouts/include/login" %>
      <% end %>
      </div>

      <div id="link_bar">
        <div id="application_tab_bar" class='bootstrap-styles'>
          <nav class="navbar navbar-default">
            <div class='navbar-header'>
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#shifts_navbar">
                <span class='sr-only'>Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <%= link_to "Shifts", root_path, class: 'navbar-brand' %>
            </div>
			<div class="collapse navbar-collapse" id='shifts_navbar'>
				<!-- This provides an additional "STC" button which also links back to the Dashboard.
			         A fix is provided to change the behavior for a user with a single department   -->
				<%= render :partial => "layouts/include/chooser" if current_user%>
				<!-- If the user has a current shift, display a button for them -->
				<%= render :partial => "layouts/include/shift_indicator" if current_user%>
				<!-- The rest of the navigation menu: Departments, Users, Shifts, Actions, Payforms  -->
				<%= render :partial => "layouts/include/nav" if current_user %>
            </div>
        </div>
     </div>
