<!DOCTYPE html>
<html>
  <%= render 'layouts/head' %>

  <body>
    <!-- Start pagebox container -->
    <div id="pagebox" class='container'>
      <div id="page_header">
        <h2 class="page_header">
          <a href="http://www.yale.edu">Shifts by Yale University</a>
        </h2>
        <% if mobile_device? && (current_user || session[:cas_user]) %>
          <%= render :partial => "layouts/include/mobile_login" %>
        <% elsif current_user || session[:cas_user] %>
          <%= render :partial => "layouts/include/login" %>
        <% end %>
      </div>

      <%= render 'layouts/navbar' %>

      <%= yield(:left_nav) %>
      <div id=<%= content_wrapper_id %>>

        <div id="flash">
          <%= render :partial => "layouts/flash", :locals => {:flash => flash} %>
        </div>

        <!-- Main Content -->

        <%- if show_title? %>
          <h1 id="page_title"><%=h yield(:title) %></h1>
          <h4 id="subtitle"><%=h yield(:subtitle) %></h4>
        <%- end %>

        <!-- Body Content -->
        <%# TODO: We should not have any more content_for :body tags, we need to
        figure out how to use this properly, and fix the files with such tags %>
        <%= yield(:body).empty? ? yield : yield(:body) %>
      </div>  <!-- End contentNav or contentNoNav (generated above or in :left_nav) -->

      <%= render 'layouts/footer' %>
    </div> <!-- End pagebox container generated in main_header -->

    <div id="pageboxBottom"> <!-- do not remove -->
      <script type='text/javascript' charset='utf-8'>
        <%= yield(:javascript) %>
      </script>
    </div>

  </body>
</html>
