# Documentation: http://docs.travis-ci.com/user/build-configuration/
# Documentation: http://docs.travis-ci.com/user/languages/ruby/

# Language
language: ruby

# Version Numbers (possible to define multiple)
# We use ruby 1.9.3p374; available versions are:
# ruby-1.9.3-p547/ruby-1.9.3-p545-railsexpress/ruby-1.9.3-p545/ruby-1.9.3-p484
rvm:
  - 2.1.2

# Environment Variables
env:
  global:
    - RAILS_ENV=test

# Dependencies
before_install:
  - sudo apt-get install -y imagemagick qt-sdk

# Installation
bundler_args: --without development

# Caching the gems and dependencies
cache: 
  - bundler
  - apt

# Run before the script
before_script:
  - cp config/database.yml.travis config/database.yml
  - bundle exec rake db:create
  - bundle exec rake db:schema:load

# Jobs to test on the script
script:
  - bundle exec rake spec

# Notifications
notifications:
    email:
        #recipients:
        #   - test@example.com
        #   By default, a build email is sent to the committer and the author,
        #   but only if they have access to the repository the commit was pushed
        #   to. Add an address here to send all emails there instead.
        on_success: change   # Only sends success emails when failure -> success
        on_failure: always   # Always send failure emails

# Run after the script is successful
# after_success:
  # For example, you could push to Heroku here
  # - git push git@heroku.com:shifts.git master
