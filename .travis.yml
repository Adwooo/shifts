# Documentation: http://docs.travis-ci.com/user/build-configuration/
# Documentation: http://docs.travis-ci.com/user/languages/ruby/

# Language
language: ruby

# Version Numbers (possible to define multiple)
# We use ruby 1.9.3p374; available versions are:
# ruby-1.9.3-p547/ruby-1.9.3-p545-railsexpress/ruby-1.9.3-p545/ruby-1.9.3-p484
rvm:
  - 1.9.3-p547
  - 2.1.2

# Environment Variables
# - DB=sqlite
# - DB=postgresql # This is needed instead of mysql for Heroku
env:
  - DB=mysql

# Run before the script
# - psql -c 'create database shifts' -U postgres
before_script:
  - mysql -e 'create database shifts'

# Jobs to test on the script
script:
  - RAILS_ENV=test bundle exec rake db:migrate --trace
  - RAILS_ENV=test bundle exec rake --trace

# Notifications
notifications:
    email:
        #recipients:
        #   - test@example.com
        #   By default, a build email is sent to the committer and the author,
        #   but only if they have access to the repository the commit was pushed
        #   to. Add an address here to send all emails there instead.
        on_success: change   # Only sends success emails when failure -> success
        on_failure: always   # Always send failure emails

# Run after the script is successful
after_success:
  # For example, you could push to Heroku here
  # - git push git@heroku.com:shifts.git master
